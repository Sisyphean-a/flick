import { Button } from "std-widgets.slint";
import { Style } from "../theme/style.slint";

export component ConfirmDialog inherits Rectangle {
    in property <string> title: "确认";
    in property <string> message: "";
    in property <bool> show: false;
    callback confirmed();
    callback cancelled();

    visible: root.show;
    background: Style.bg-overlay;

    // 居中对话框
    Rectangle {
        x: (parent.width - self.width) / 2;
        y: (parent.height - self.height) / 2;
        width: 320px;
        height: 160px;
        background: Style.bg-dialog;
        border-radius: 8px;
        border-width: 1px;
        border-color: Style.border-color;
        drop-shadow-blur: 12px;
        drop-shadow-color: #00000033;

        VerticalLayout {
            padding: 20px;
            spacing: 16px;

            Text {
                text: root.title;
                font-size: 16px;
                font-weight: 700;
            }

            Text {
                text: root.message;
                font-size: 14px;
                color: Style.text-secondary;
                wrap: word-wrap;
            }

            Rectangle { vertical-stretch: 1; }

            HorizontalLayout {
                alignment: end;
                spacing: 8px;
                Button {
                    text: "取消";
                    width: 70px;
                    clicked => {
                        root.cancelled();
                    }
                }
                Button {
                    text: "确认";
                    width: 70px;
                    clicked => {
                        root.confirmed();
                    }
                }
            }
        }
    }

    // 点击遮罩关闭
    TouchArea {
        width: 100%;
        height: 100%;
        clicked => {
            root.cancelled();
        }
    }
}
